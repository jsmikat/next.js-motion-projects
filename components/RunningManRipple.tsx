"use client";

import { useState } from "react";

import { motion } from "motion/react";

const lineData = [
  { x1: 359, x2: 286, y: 156 },
  { x1: 355, x2: 344, y: 154 },
  { x1: 364, x2: 328, y: 160 },
  { x1: 396, x2: 388, y: 160 },
  { x1: 254, x2: 180, y: 160 },
  { x1: 368, x2: 326, y: 164 },
  { x1: 372, x2: 324, y: 168 },
  { x1: 404, x2: 388, y: 168 },
  { x1: 372, x2: 324, y: 172 },
  { x1: 336, x2: 322, y: 176 },
  { x1: 332, x2: 326, y: 180 },
  { x1: 352, x2: 342, y: 174 },
  { x1: 372, x2: 364, y: 174 },
  { x1: 372, x2: 330, y: 170 },
  { x1: 370, x2: 332, y: 166 },
  { x1: 366, x2: 334, y: 162 },
  { x1: 362, x2: 336, y: 158 },
  { x1: 312, x2: 258, y: 180 },
  { x1: 310, x2: 250, y: 176 },
  { x1: 190, x2: 168, y: 176 },
  { x1: 300, x2: 276, y: 172 },
  { x1: 252, x2: 236, y: 172 },
  { x1: 242, x2: 210, y: 164 },
  { x1: 194, x2: 180, y: 164 },
  { x1: 194, x2: 168, y: 172 },
  { x1: 228, x2: 192, y: 156 },
  { x1: 286, x2: 214, y: 168 },
  { x1: 196, x2: 168, y: 168 },
  { x1: 365, x2: 268, y: 184 },
  { x1: 408, x2: 388, y: 184 },
  { x1: 322, x2: 272, y: 188 },
  { x1: 358, x2: 272, y: 192 },
  { x1: 284, x2: 272, y: 194 },
  { x1: 286, x2: 270, y: 198 },
  { x1: 292, x2: 268, y: 202 },
  { x1: 294, x2: 266, y: 206 },
  { x1: 369, x2: 361, y: 230 },
  { x1: 367, x2: 333, y: 236 },
  { x1: 368, x2: 354, y: 226 },
  { x1: 404, x2: 392, y: 192 },
  { x1: 324, x2: 270, y: 196 },
  { x1: 356, x2: 268, y: 200 },
  { x1: 404, x2: 390, y: 200 },
  { x1: 330, x2: 266, y: 204 },
  { x1: 348, x2: 264, y: 208 },
  { x1: 400, x2: 384, y: 208 },
  { x1: 350, x2: 262, y: 212 },
  { x1: 364, x2: 260, y: 216 },
  { x1: 396, x2: 378, y: 216 },
  { x1: 396, x2: 388, y: 220 },
  { x1: 384, x2: 378, y: 220 },
  { x1: 400, x2: 394, y: 212 },
  { x1: 402, x2: 398, y: 204 },
  { x1: 404, x2: 402, y: 196 },
  { x1: 406, x2: 402, y: 188 },
  { x1: 406, x2: 396, y: 180 },
  { x1: 404, x2: 390, y: 172 },
  { x1: 350, x2: 256, y: 220 },
  { x1: 394, x2: 254, y: 224 },
  { x1: 346, x2: 252, y: 228 },
  { x1: 326, x2: 246, y: 232 },
  { x1: 324, x2: 148, y: 236 },
  { x1: 320, x2: 192, y: 240 },
  { x1: 316, x2: 236, y: 244 },
  { x1: 312, x2: 234, y: 248 },
  { x1: 252, x2: 232, y: 250 },
  { x1: 262, x2: 228, y: 254 },
  { x1: 270, x2: 226, y: 258 },
  { x1: 278, x2: 224, y: 262 },
  { x1: 288, x2: 222, y: 266 },
  { x1: 294, x2: 222, y: 270 },
  { x1: 294, x2: 220, y: 274 },
  { x1: 292, x2: 220, y: 278 },
  { x1: 288, x2: 220, y: 282 },
  { x1: 284, x2: 224, y: 286 },
  { x1: 282, x2: 226, y: 290 },
  { x1: 278, x2: 230, y: 294 },
  { x1: 276, x2: 252, y: 298 },
  { x1: 274, x2: 232, y: 302 },
  { x1: 258, x2: 216, y: 306 },
  { x1: 252, x2: 216, y: 310 },
  { x1: 248, x2: 222, y: 314 },
  { x1: 244, x2: 228, y: 318 },
  { x1: 240, x2: 234, y: 322 },
  { x1: 308, x2: 230, y: 252 },
  { x1: 304, x2: 228, y: 256 },
  { x1: 300, x2: 226, y: 260 },
  { x1: 296, x2: 224, y: 264 },
  { x1: 292, x2: 220, y: 268 },
  { x1: 298, x2: 218, y: 272 },
  { x1: 294, x2: 216, y: 276 },
  { x1: 286, x2: 214, y: 284 },
  { x1: 280, x2: 214, y: 292 },
  { x1: 330, x2: 130, y: 300 },
  { x1: 256, x2: 210, y: 308 },
  { x1: 246, x2: 210, y: 316 },
  { x1: 240, x2: 218, y: 324 },
  { x1: 256, x2: 214, y: 332 },
  { x1: 248, x2: 238, y: 330 },
  { x1: 254, x2: 238, y: 334 },
  { x1: 256, x2: 238, y: 338 },
  { x1: 286, x2: 272, y: 332 },
  { x1: 304, x2: 286, y: 324 },
  { x1: 320, x2: 302, y: 316 },
  { x1: 328, x2: 314, y: 308 },
  { x1: 330, x2: 314, y: 304 },
  { x1: 256, x2: 238, y: 342 },
  { x1: 260, x2: 236, y: 346 },
  { x1: 256, x2: 236, y: 350 },
  { x1: 254, x2: 234, y: 354 },
  { x1: 252, x2: 234, y: 358 },
  { x1: 248, x2: 232, y: 362 },
  { x1: 242, x2: 232, y: 366 },
  { x1: 238, x2: 232, y: 370 },
  { x1: 238, x2: 232, y: 374 },
  { x1: 238, x2: 232, y: 378 },
  { x1: 238, x2: 234, y: 382 },
  { x1: 270, x2: 230, y: 340 },
  { x1: 258, x2: 230, y: 348 },
  { x1: 254, x2: 228, y: 352 },
  { x1: 254, x2: 228, y: 356 },
  { x1: 250, x2: 228, y: 360 },
  { x1: 244, x2: 226, y: 364 },
  { x1: 240, x2: 226, y: 368 },
  { x1: 238, x2: 226, y: 372 },
  { x1: 238, x2: 228, y: 376 },
  { x1: 238, x2: 230, y: 380 },
  { x1: 238, x2: 200, y: 384 },
  { x1: 262, x2: 230, y: 344 },
  { x1: 250, x2: 200, y: 312 },
  { x1: 242, x2: 194, y: 320 },
  { x1: 234, x2: 150, y: 328 },
  { x1: 226, x2: 182, y: 336 },
  { x1: 218, x2: 202, y: 340 },
  { x1: 214, x2: 162, y: 344 },
  { x1: 208, x2: 188, y: 348 },
  { x1: 202, x2: 154, y: 352 },
  { x1: 194, x2: 178, y: 356 },
  { x1: 184, x2: 146, y: 360 },
  { x1: 178, x2: 162, y: 364 },
  { x1: 164, x2: 150, y: 372 },
  { x1: 150, x2: 138, y: 380 },
  { x1: 138, x2: 130, y: 388 },
  { x1: 172, x2: 138, y: 368 },
  { x1: 158, x2: 128, y: 376 },
  { x1: 144, x2: 102, y: 384 },
  { x1: 126, x2: 70, y: 380 },
  { x1: 124, x2: 110, y: 382 },
  { x1: 124, x2: 110, y: 386 },
  { x1: 126, x2: 110, y: 390 },
  { x1: 128, x2: 110, y: 394 },
  { x1: 128, x2: 110, y: 398 },
  { x1: 128, x2: 110, y: 402 },
  { x1: 126, x2: 110, y: 406 },
  { x1: 122, x2: 110, y: 410 },
  { x1: 118, x2: 110, y: 414 },
  { x1: 118, x2: 110, y: 418 },
  { x1: 116, x2: 110, y: 422 },
  { x1: 116, x2: 110, y: 426 },
  { x1: 116, x2: 112, y: 430 },
  { x1: 116, x2: 112, y: 434 },
  { x1: 126, x2: 102, y: 388 },
  { x1: 130, x2: 102, y: 396 },
  { x1: 128, x2: 102, y: 400 },
  { x1: 126, x2: 102, y: 404 },
  { x1: 122, x2: 102, y: 408 },
  { x1: 120, x2: 102, y: 412 },
  { x1: 118, x2: 102, y: 416 },
  { x1: 116, x2: 102, y: 420 },
  { x1: 116, x2: 104, y: 424 },
  { x1: 116, x2: 106, y: 428 },
  { x1: 116, x2: 108, y: 432 },
  { x1: 134, x2: 102, y: 392 },
  { x1: 276, x2: 230, y: 336 },
  { x1: 294, x2: 258, y: 328 },
  { x1: 310, x2: 270, y: 320 },
  { x1: 326, x2: 276, y: 312 },
  { x1: 310, x2: 214, y: 280 },
  { x1: 322, x2: 214, y: 288 },
  { x1: 328, x2: 164, y: 296 },
  { x1: 284, x2: 206, y: 304 },
  { x1: 364, x2: 350, y: 240 },
  { x1: 403, x2: 355, y: 232 },
  { x1: 372, x2: 342, y: 176 },
  { x1: 408, x2: 386, y: 176 },
  { x1: 350, x2: 344, y: 180 },
  { x1: 368, x2: 364, y: 180 },
  { x1: 363, x2: 358, y: 188 },
  { x1: 362, x2: 356, y: 186 },
  { x1: 362, x2: 360, y: 192 },
  { x1: 363, x2: 354, y: 196 },
  { x1: 353, x2: 344, y: 204 },
];

export default function RunningManRipple() {
  const [activeY, setActiveY] = useState<number | null>(null);

  return (
    <div className="flex min-h-screen items-center justify-center bg-neutral-50">
      <div className="relative size-[560px]">
        <svg
          viewBox="0 0 560 560"
          className="size-full text-blue-500"
          xmlns="http://www.w3.org/2000/svg"
          onMouseLeave={() => setActiveY(null)}
        >
          <g fill="none" fillRule="evenodd" stroke="none" strokeWidth="1">
            {lineData.map((line, index) => (
              <ReactiveLine
                key={index}
                x1={line.x1}
                x2={line.x2}
                y={line.y}
                activeY={activeY}
                setActiveY={setActiveY}
              />
            ))}
          </g>
        </svg>
      </div>
    </div>
  );
}

interface ReactiveLineProps {
  x1: number;
  x2: number;
  y: number;
  activeY: number | null;
  setActiveY: (y: number | null) => void;
}

function ReactiveLine({ x1, x2, y, activeY, setActiveY }: ReactiveLineProps) {
  const distance = activeY !== null ? Math.abs(activeY - y) : Infinity;

  let xSequence = [0];
  let transition = {};

  if (distance === 0) {
    xSequence = [0, -12, 12, -6, 6, 0];
    transition = { duration: 0.3, ease: "easeInOut" };
  } else if (distance <= 6) {
    xSequence = [0, -8, 8, -4, 4, 0];
    transition = { duration: 0.4, delay: 0.05, ease: "easeOut" };
  } else if (distance <= 14) {
    xSequence = [0, -3, 3, 0];
    transition = { duration: 0.5, delay: 0.1, ease: "easeOut" };
  }

  return (
    <motion.line
      x1={x1}
      x2={x2}
      y1={y}
      y2={y}
      stroke="currentColor"
      strokeWidth="3"
      strokeLinecap="round"
      onMouseEnter={() => setActiveY(y)}
      animate={{
        x: xSequence,
      }}
      transition={transition}
    />
  );
}
